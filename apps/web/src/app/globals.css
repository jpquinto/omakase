@import "tailwindcss";
@import "tw-animate-css";
@import "streamdown/styles.css";

@source "../node_modules/streamdown/dist/*.js";

/* ============================================================================
   Omakase Design System — Liquid Glass
   A Japanese-inspired glassmorphism design language with light/dark modes.
   ============================================================================ */

@theme {
  /* --- Typography --- */
  --font-serif: var(--font-instrument-serif), "Instrument Serif", "Georgia", serif;
  --font-sans: var(--font-instrument-serif), "Instrument Serif", "Georgia", serif;
  --font-jp: var(--font-noto-jp), "Noto Serif JP", serif;
  --font-mono: "JetBrains Mono", "Fira Code", ui-monospace, monospace;

  /* --- Omakase Colors (static, theme-independent) --- */

  /* Primary: Sakura (桜) — soft cherry blossom pink */
  --color-oma-primary: #f472b6;
  --color-oma-primary-soft: #f9a8d4;
  --color-oma-primary-dim: #ec4899;
  --color-oma-primary-foreground: #ffffff;

  /* Secondary: Beni (紅) — refined Japanese red */
  --color-oma-secondary: #f87171;
  --color-oma-secondary-soft: #fca5a5;
  --color-oma-secondary-dim: #ef4444;

  /* Accent: Gold (金) */
  --color-oma-gold: #fbbf24;
  --color-oma-gold-soft: #f59e0b;
  --color-oma-gold-dim: #d97706;

  /* Accent: Jade (翡翠) */
  --color-oma-jade: #6ee7b7;
  --color-oma-jade-soft: #34d399;
  --color-oma-jade-dim: #10b981;

  /* Accent: Indigo (藍) */
  --color-oma-indigo: #818cf8;
  --color-oma-indigo-soft: #a5b4fc;
  --color-oma-indigo-dim: #6366f1;

  /* Semantic */
  --color-oma-success: #4ade80;
  --color-oma-warning: #fbbf24;
  --color-oma-error: #f87171;
  --color-oma-info: #38bdf8;

  /* Status */
  --color-oma-pending: #fbbf24;
  --color-oma-progress: #38bdf8;
  --color-oma-review: #fbbf24;
  --color-oma-done: #4ade80;
  --color-oma-fail: #f87171;

  /* --- Radii --- */
  --radius-oma-sm: 8px;
  --radius-oma: 12px;
  --radius-oma-lg: 16px;
  --radius-oma-xl: 24px;
  --radius-oma-full: 9999px;
  --radius-sm: 8px;
  --radius-md: 12px;
  --radius-lg: 16px;

  /* --- Animations --- */
  --animate-oma-fade-up: oma-fade-up 0.6s cubic-bezier(0.16, 1, 0.3, 1) forwards;
  --animate-oma-glass-shimmer: oma-glass-shimmer 3s ease-in-out infinite;
  --animate-oma-float: oma-float 6s ease-in-out infinite;
  --animate-oma-breathe: oma-breathe 4s ease-in-out infinite;
  --animate-oma-glow-pulse: oma-glow-pulse 3s ease-in-out infinite;
  --animate-oma-slide-in-right: oma-slide-in-right 0.5s cubic-bezier(0.16, 1, 0.3, 1) forwards;
  --animate-oma-scale-in: oma-scale-in 0.4s cubic-bezier(0.16, 1, 0.3, 1) forwards;
  --animate-oma-blur-in: oma-blur-in 0.6s cubic-bezier(0.16, 1, 0.3, 1) forwards;

  /* --- Shadows --- */
  --shadow-oma-sm: 0 1px 2px rgba(0, 0, 0, 0.4);
  --shadow-oma: 0 4px 16px rgba(0, 0, 0, 0.4);
  --shadow-oma-lg: 0 8px 32px rgba(0, 0, 0, 0.5);
  --shadow-oma-glow-primary: 0 0 24px rgba(244, 114, 182, 0.2);
  --shadow-oma-glow-secondary: 0 0 24px rgba(248, 113, 113, 0.15);
  --shadow-oma-glow-gold: 0 0 24px rgba(251, 191, 36, 0.15);
}

/* ============================================================================
   Dark Theme (default) — CSS custom properties on :root / .dark
   ============================================================================ */

:root {
  /* Omakase backgrounds */
  --color-oma-bg-deep: #060609;
  --color-oma-bg: #0b0b12;
  --color-oma-bg-elevated: #12131f;
  --color-oma-bg-surface: #181a2a;

  /* Omakase text */
  --color-oma-text: #e2e8f0;
  --color-oma-text-muted: #94a3b8;
  --color-oma-text-subtle: #64748b;
  --color-oma-text-faint: #475569;

  /* Glass borders */
  --color-oma-glass-border: rgba(255, 255, 255, 0.08);
  --color-oma-glass-border-bright: rgba(255, 255, 255, 0.16);

  /* shadcn semantic tokens */
  --color-background: #0b0b12;
  --color-foreground: #e2e8f0;
  --color-primary: #f472b6;
  --color-primary-foreground: #ffffff;
  --color-secondary: #181a2a;
  --color-secondary-foreground: #e2e8f0;
  --color-accent: #12131f;
  --color-accent-foreground: #e2e8f0;
  --color-muted: #181a2a;
  --color-muted-foreground: #94a3b8;
  --color-destructive: #f87171;
  --color-border: rgba(255, 255, 255, 0.08);
  --color-input: rgba(255, 255, 255, 0.08);
  --color-ring: #f472b6;
  --color-card: #12131f;
  --color-card-foreground: #e2e8f0;
  --color-popover: #12131f;
  --color-popover-foreground: #e2e8f0;

  color-scheme: dark;
}

/* ============================================================================
   Light Theme
   ============================================================================ */

.light {
  /* Omakase backgrounds */
  --color-oma-bg-deep: #f8f6f3;
  --color-oma-bg: #faf9f7;
  --color-oma-bg-elevated: #ffffff;
  --color-oma-bg-surface: #f1eeeb;

  /* Omakase text */
  --color-oma-text: #1a1a2e;
  --color-oma-text-muted: #64748b;
  --color-oma-text-subtle: #94a3b8;
  --color-oma-text-faint: #cbd5e1;

  /* Glass borders */
  --color-oma-glass-border: rgba(0, 0, 0, 0.06);
  --color-oma-glass-border-bright: rgba(0, 0, 0, 0.12);

  /* shadcn semantic tokens */
  --color-background: #faf9f7;
  --color-foreground: #1a1a2e;
  --color-primary: #ec4899;
  --color-primary-foreground: #ffffff;
  --color-secondary: #f1eeeb;
  --color-secondary-foreground: #1a1a2e;
  --color-accent: #f8f6f3;
  --color-accent-foreground: #1a1a2e;
  --color-muted: #f1eeeb;
  --color-muted-foreground: #64748b;
  --color-destructive: #ef4444;
  --color-border: rgba(0, 0, 0, 0.08);
  --color-input: rgba(0, 0, 0, 0.08);
  --color-ring: #ec4899;
  --color-card: #ffffff;
  --color-card-foreground: #1a1a2e;
  --color-popover: #ffffff;
  --color-popover-foreground: #1a1a2e;

  color-scheme: light;
}

/* ============================================================================
   Keyframes
   ============================================================================ */

@keyframes oma-fade-up {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes oma-glass-shimmer {
  0%,
  100% {
    background-position: 0% 50%;
  }
  50% {
    background-position: 100% 50%;
  }
}

@keyframes oma-float {
  0%,
  100% {
    transform: translateY(0);
  }
  50% {
    transform: translateY(-8px);
  }
}

@keyframes oma-breathe {
  0%,
  100% {
    opacity: 0.4;
  }
  50% {
    opacity: 0.8;
  }
}

@keyframes oma-spin-slow {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}

@keyframes oma-pulse-ring {
  0% {
    transform: scale(0.8);
    opacity: 0.6;
  }
  50% {
    transform: scale(1);
    opacity: 0.3;
  }
  100% {
    transform: scale(0.8);
    opacity: 0.6;
  }
}

@keyframes oma-glow-pulse {
  0%,
  100% {
    box-shadow: 0 0 20px rgba(244, 114, 182, 0.15),
      0 0 40px rgba(244, 114, 182, 0.05);
  }
  50% {
    box-shadow: 0 0 30px rgba(244, 114, 182, 0.25),
      0 0 60px rgba(244, 114, 182, 0.1);
  }
}

@keyframes oma-slide-in-right {
  from {
    opacity: 0;
    transform: translateX(30px);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

@keyframes oma-scale-in {
  from {
    opacity: 0;
    transform: scale(0.9);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}

@keyframes oma-blur-in {
  from {
    opacity: 0;
    filter: blur(10px);
  }
  to {
    opacity: 1;
    filter: blur(0);
  }
}

@keyframes oma-blob-drift-1 {
  0%, 100% {
    transform: translate(0, 0) scale(1);
  }
  25% {
    transform: translate(10%, 15%) scale(1.1);
  }
  50% {
    transform: translate(-5%, 25%) scale(0.95);
  }
  75% {
    transform: translate(-15%, 10%) scale(1.05);
  }
}

@keyframes oma-blob-drift-2 {
  0%, 100% {
    transform: translate(0, 0) scale(1);
  }
  25% {
    transform: translate(-12%, -10%) scale(1.08);
  }
  50% {
    transform: translate(8%, -20%) scale(0.92);
  }
  75% {
    transform: translate(15%, -5%) scale(1.04);
  }
}

@keyframes oma-blob-drift-3 {
  0%, 100% {
    transform: translate(0, 0) scale(1);
  }
  25% {
    transform: translate(15%, -15%) scale(0.94);
  }
  50% {
    transform: translate(-10%, -8%) scale(1.1);
  }
  75% {
    transform: translate(-8%, 12%) scale(1.02);
  }
}

@keyframes oma-blob-drift-4 {
  0%, 100% {
    transform: translate(0, 0) scale(1);
  }
  25% {
    transform: translate(-8%, 20%) scale(1.06);
  }
  50% {
    transform: translate(12%, 5%) scale(0.96);
  }
  75% {
    transform: translate(5%, -12%) scale(1.08);
  }
}

@keyframes shimmer {
  0% {
    background-position: 200% center;
  }
  100% {
    background-position: -200% center;
  }
}

@keyframes equalizer {
  0%, 100% { height: 4px; }
  50% { height: 12px; }
}

@keyframes marquee {
  0% { transform: translateX(0); }
  100% { transform: translateX(-100%); }
}

/* Voice chat animations */

@keyframes voice-ripple {
  0% {
    transform: scale(1);
    opacity: 0.4;
  }
  100% {
    transform: scale(2.4);
    opacity: 0;
  }
}

@keyframes voice-glow-breathe {
  0%, 100% {
    box-shadow: 0 0 20px var(--voice-color, rgba(244, 114, 182, 0.3)),
                0 0 40px var(--voice-color, rgba(244, 114, 182, 0.1));
    transform: scale(1);
  }
  50% {
    box-shadow: 0 0 30px var(--voice-color, rgba(244, 114, 182, 0.5)),
                0 0 60px var(--voice-color, rgba(244, 114, 182, 0.2));
    transform: scale(1.05);
  }
}

/* Hide <hr> inside agent chat messages — these are thinking separators rendered
   by Streamdown from markdown (---, ***, ___). They get replaced visually by
   ThinkingPill components at the React level, but this catches any that slip through. */
.agent-content hr {
  display: none;
}

@keyframes voice-bar {
  0%, 100% { transform: scaleY(0.3); }
  50% { transform: scaleY(1); }
}

@keyframes audio-bar-pulse {
  0%, 100% { transform: scaleY(1); }
  50% { transform: scaleY(0.85); }
}

@keyframes voice-orbit {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

/* Voice blob morph — organic shape shifting for TTS overlay */

@keyframes voice-blob-morph-1 {
  0%, 100% {
    d: path("M44.5,-76.3C56.9,-68.8,65.7,-55.2,73.2,-41.1C80.7,-27,86.8,-12.4,85.8,1.2C84.8,14.9,76.7,27.7,67.3,39.2C57.9,50.7,47.1,60.8,34.5,68.3C21.9,75.8,7.5,80.7,-6.8,80.1C-21.1,79.5,-35.4,73.5,-47.8,64.7C-60.3,55.9,-70.9,44.3,-77.1,30.7C-83.3,17.1,-85.1,1.4,-82.2,-13.1C-79.3,-27.5,-71.6,-40.8,-60.7,-49.8C-49.8,-58.8,-35.6,-63.5,-22,-71.3C-8.3,-79.1,5,-90,18.8,-89.5C32.6,-89,32.1,-83.8,44.5,-76.3Z");
  }
  25% {
    d: path("M38.9,-67.2C50.6,-60.1,60.5,-49.6,68.5,-37.3C76.5,-25,82.6,-10.9,81.8,2.4C81,15.7,73.4,28.2,64.2,39.2C55,50.2,44.2,59.8,31.8,66.5C19.4,73.2,5.4,77.1,-8.8,77.1C-23,77.1,-37.4,73.3,-48.4,65.2C-59.4,57.1,-67,44.7,-73.1,31.2C-79.2,17.7,-83.9,3.1,-81.6,-10.4C-79.3,-23.9,-70,-36.3,-58.7,-44.7C-47.4,-53.1,-34.1,-57.5,-21.8,-65.2C-9.5,-72.9,1.8,-83.9,14.6,-85.5C27.4,-87.1,27.2,-74.3,38.9,-67.2Z");
  }
  50% {
    d: path("M42.7,-73.8C55.1,-66.5,64.8,-54,72.3,-40.3C79.8,-26.6,85.1,-11.7,83.6,2.1C82.1,15.9,73.8,28.6,64.2,39.8C54.6,51,43.7,60.7,31,67.8C18.3,74.9,3.8,79.4,-11.1,79.2C-26,79,-41.3,74.1,-52.5,64.8C-63.7,55.5,-70.8,41.8,-76,27.4C-81.2,13,-84.5,-2.1,-81.1,-15.5C-77.7,-28.9,-67.6,-40.5,-55.7,-48.3C-43.8,-56.1,-30.1,-60.1,-17.2,-67.7C-4.3,-75.3,7.8,-86.5,21,-87.3C34.2,-88.1,30.3,-81.1,42.7,-73.8Z");
  }
  75% {
    d: path("M40.2,-69.9C51.5,-62.2,59.8,-49.8,67.5,-36.6C75.2,-23.4,82.3,-9.3,82.1,4.6C81.9,18.5,74.4,32.2,64.7,43.1C55,54,43.1,62.1,30,68.2C16.9,74.3,2.6,78.4,-12.3,78.4C-27.2,78.4,-42.7,74.3,-53.5,65C-64.3,55.7,-70.4,41.2,-75.4,26.4C-80.4,11.6,-84.3,-3.5,-81.1,-17.2C-77.9,-30.9,-67.6,-43.2,-55.3,-51C-43,-58.8,-28.7,-62.1,-15.6,-69.6C-2.5,-77.1,9.4,-88.8,22.1,-89C34.8,-89.2,28.9,-77.6,40.2,-69.9Z");
  }
}

@keyframes voice-blob-morph-2 {
  0%, 100% {
    d: path("M39.5,-68.1C50.5,-60.9,58.6,-48.9,65.8,-36C73,-23.1,79.3,-9.3,79.2,4.3C79.1,17.9,72.6,31.3,63.4,42.4C54.2,53.5,42.3,62.3,29.2,68.5C16.1,74.7,1.8,78.3,-12.6,77.6C-27,76.9,-41.5,71.9,-53.2,63C-64.9,54.1,-73.8,41.3,-78.4,27.1C-83,12.9,-83.3,-2.7,-79.4,-16.7C-75.5,-30.7,-67.4,-43.1,-56.1,-50.8C-44.8,-58.5,-30.3,-61.5,-17.1,-68.8C-3.9,-76.1,7.9,-87.7,20.6,-88.1C33.3,-88.5,28.5,-75.3,39.5,-68.1Z");
  }
  33% {
    d: path("M43.8,-75.8C56.1,-68.2,65.1,-55.1,72.5,-41.1C79.9,-27.1,85.7,-12.2,84.6,1.8C83.5,15.8,75.5,28.9,66.1,40.4C56.7,51.9,45.9,61.8,33.4,68.8C20.9,75.8,6.7,79.9,-7.4,79.5C-21.5,79.1,-35.5,74.2,-47.1,65.9C-58.7,57.6,-67.9,45.9,-74.3,32.6C-80.7,19.3,-84.3,4.4,-81.7,-9.3C-79.1,-23,-70.3,-35.5,-59.2,-43.7C-48.1,-51.9,-34.7,-55.8,-22.2,-64C-9.7,-72.2,2,-84.7,14.8,-86C27.6,-87.3,31.5,-83.4,43.8,-75.8Z");
  }
  66% {
    d: path("M36.4,-63.2C47.1,-56.1,55.8,-45.2,63.4,-33.1C71,-21,77.5,-7.7,77.1,5.4C76.7,18.5,69.4,31.4,59.8,41.8C50.2,52.2,38.3,60.1,25.4,66C12.5,71.9,-1.4,75.8,-15.8,75.5C-30.2,75.2,-45.1,70.7,-55.7,61.5C-66.3,52.3,-72.6,38.4,-77,23.8C-81.4,9.2,-83.9,-6.1,-80.5,-19.8C-77.1,-33.5,-67.8,-45.6,-56,-53.1C-44.2,-60.6,-29.9,-63.5,-17,-70.3C-4.1,-77.1,7.4,-87.8,19.5,-87.8C31.6,-87.8,25.7,-70.3,36.4,-63.2Z");
  }
}

@keyframes voice-blob-morph-3 {
  0%, 100% {
    d: path("M41.2,-71.3C52.8,-64.1,61.3,-51.5,69,-38.2C76.7,-24.9,83.6,-10.9,83.2,2.8C82.8,16.5,75.1,29.9,65.5,41C55.9,52.1,44.4,60.9,31.5,67.4C18.6,73.9,4.3,78.1,-10.3,77.8C-24.9,77.5,-39.8,72.7,-51.4,64C-63,55.3,-71.3,42.7,-76.6,28.8C-81.9,14.9,-84.2,-0.3,-80.7,-13.8C-77.2,-27.3,-67.9,-39.1,-56.3,-46.7C-44.7,-54.3,-30.8,-57.7,-18.2,-65.4C-5.6,-73.1,5.7,-85.1,18.2,-86.1C30.7,-87.1,29.6,-78.5,41.2,-71.3Z");
  }
  50% {
    d: path("M37.8,-65.3C48.4,-58.6,56.1,-46.4,63.5,-33.6C70.9,-20.8,78,-7.4,78.2,6.2C78.4,19.8,71.7,33.6,62.3,44.5C52.9,55.4,40.8,63.4,27.5,69.3C14.2,75.2,-0.3,79,-15.2,78.5C-30.1,78,-45.4,73.2,-56.4,63.7C-67.4,54.2,-74.1,40,-78.5,25.1C-82.9,10.2,-85,-5.4,-81.2,-19.1C-77.4,-32.8,-67.7,-44.6,-55.8,-52C-43.9,-59.4,-29.8,-62.4,-17,-69.7C-4.2,-77,7.3,-88.6,19.6,-88.9C31.9,-89.2,27.2,-72,37.8,-65.3Z");
  }
}

@keyframes voice-blob-enter {
  from {
    opacity: 0;
    transform: translate(-50%, -50%) scale(0.6);
    filter: blur(20px);
  }
  to {
    opacity: 1;
    transform: translate(-50%, -50%) scale(1);
    filter: blur(0px);
  }
}

@keyframes voice-blob-exit {
  from {
    opacity: 1;
    transform: translate(-50%, -50%) scale(1);
    filter: blur(0px);
  }
  to {
    opacity: 0;
    transform: translate(-50%, -50%) scale(0.7);
    filter: blur(16px);
  }
}

@keyframes voice-mascot-breathe {
  0%, 100% { transform: translate(-50%, -50%) scale(1); }
  50% { transform: translate(-50%, -50%) scale(1.08); }
}

/* ============================================================================
   Base Styles
   ============================================================================ */

*,
*::before,
*::after {
  box-sizing: border-box;
}

body {
  margin: 0;
  background-color: var(--color-oma-bg);
  color: var(--color-oma-text);
  font-family: var(--font-instrument-serif), "Instrument Serif", "Georgia", serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  text-rendering: optimizeLegibility;
  transition: background-color 0.3s ease, color 0.3s ease;
}

/* ============================================================================
   Omakase Liquid Glass Utility Classes
   ============================================================================ */

@layer utilities {
  /* --- Glass Surfaces (dark mode) ---
     Uses the dark bg base (rgb 18,19,31) at moderate opacity so surfaces
     are readable even when backdrop-filter renders differently across
     browsers/GPUs, plus a subtle white tint for the glass sheen. */
  .glass {
    background: linear-gradient(rgba(255, 255, 255, 0.03), rgba(255, 255, 255, 0.03)),
                rgba(18, 19, 31, 0.55);
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
    border: 1px solid var(--color-oma-glass-border);
  }

  .glass-sm {
    background: linear-gradient(rgba(255, 255, 255, 0.02), rgba(255, 255, 255, 0.02)),
                rgba(18, 19, 31, 0.45);
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    border: 1px solid var(--color-oma-glass-border);
  }

  .glass-lg {
    background: linear-gradient(rgba(255, 255, 255, 0.05), rgba(255, 255, 255, 0.05)),
                rgba(18, 19, 31, 0.75);
    backdrop-filter: blur(32px);
    -webkit-backdrop-filter: blur(32px);
    border: 1px solid var(--color-oma-glass-border-bright);
  }

  .light .glass {
    background: rgba(255, 255, 255, 0.6);
    border-color: var(--color-oma-glass-border);
  }

  .light .glass-sm {
    background: rgba(255, 255, 255, 0.4);
    border-color: var(--color-oma-glass-border);
  }

  .light .glass-lg {
    background: rgba(255, 255, 255, 0.75);
    border-color: var(--color-oma-glass-border-bright);
  }

  .glass-hover:hover {
    background: linear-gradient(rgba(255, 255, 255, 0.06), rgba(255, 255, 255, 0.06)),
                rgba(18, 19, 31, 0.6);
    border-color: var(--color-oma-glass-border-bright);
  }

  .light .glass-hover:hover {
    background: rgba(255, 255, 255, 0.8);
  }

  .glass-active {
    background: linear-gradient(rgba(255, 255, 255, 0.08), rgba(255, 255, 255, 0.08)),
                rgba(18, 19, 31, 0.65);
    border-color: var(--color-oma-glass-border-bright);
  }

  /* --- Glass with Color Tints --- */
  .glass-primary {
    background: linear-gradient(rgba(244, 114, 182, 0.08), rgba(244, 114, 182, 0.08)),
                rgba(18, 19, 31, 0.5);
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
    border: 1px solid rgba(244, 114, 182, 0.15);
  }

  .light .glass-primary {
    background: rgba(244, 114, 182, 0.06);
    border-color: rgba(244, 114, 182, 0.12);
  }

  .glass-secondary {
    background: linear-gradient(rgba(248, 113, 113, 0.06), rgba(248, 113, 113, 0.06)),
                rgba(18, 19, 31, 0.5);
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
    border: 1px solid rgba(248, 113, 113, 0.12);
  }

  .glass-gold {
    background: linear-gradient(rgba(251, 191, 36, 0.06), rgba(251, 191, 36, 0.06)),
                rgba(18, 19, 31, 0.5);
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
    border: 1px solid rgba(251, 191, 36, 0.12);
  }

  /* --- Gradient Borders (liquid glass edge effect) --- */
  .glass-edge {
    position: relative;
  }

  .glass-edge::before {
    content: "";
    position: absolute;
    inset: 0;
    border-radius: inherit;
    padding: 1px;
    background: linear-gradient(
      135deg,
      rgba(255, 255, 255, 0.15),
      rgba(255, 255, 255, 0.03),
      rgba(255, 255, 255, 0.08)
    );
    -webkit-mask: linear-gradient(#fff 0 0) content-box,
      linear-gradient(#fff 0 0);
    -webkit-mask-composite: xor;
    mask-composite: exclude;
    pointer-events: none;
  }

  .light .glass-edge::before {
    background: linear-gradient(
      135deg,
      rgba(0, 0, 0, 0.08),
      rgba(0, 0, 0, 0.02),
      rgba(0, 0, 0, 0.05)
    );
  }

  /* --- Glow Effects --- */
  .glow-primary {
    box-shadow: 0 0 24px rgba(244, 114, 182, 0.2),
      0 0 48px rgba(244, 114, 182, 0.05);
  }

  .glow-secondary {
    box-shadow: 0 0 24px rgba(248, 113, 113, 0.15),
      0 0 48px rgba(248, 113, 113, 0.05);
  }

  .glow-gold {
    box-shadow: 0 0 24px rgba(251, 191, 36, 0.15),
      0 0 48px rgba(251, 191, 36, 0.05);
  }

  .light .glow-primary {
    box-shadow: 0 0 20px rgba(236, 72, 153, 0.12),
      0 0 40px rgba(236, 72, 153, 0.04);
  }

  /* --- Japanese Decorative --- */
  .oma-enso {
    width: 120px;
    height: 120px;
    border-radius: 50%;
    border: 3px solid rgba(255, 255, 255, 0.12);
    border-top-color: rgba(255, 255, 255, 0.25);
    border-right-color: rgba(255, 255, 255, 0.04);
    transform: rotate(-30deg);
  }

  .light .oma-enso {
    border-color: rgba(0, 0, 0, 0.08);
    border-top-color: rgba(0, 0, 0, 0.15);
    border-right-color: rgba(0, 0, 0, 0.03);
  }

  .oma-wave-pattern {
    background-image: radial-gradient(
        circle at 50% 150%,
        transparent 65%,
        rgba(255, 255, 255, 0.03) 65%,
        rgba(255, 255, 255, 0.03) 70%,
        transparent 70%
      ),
      radial-gradient(
        circle at 0% 150%,
        transparent 65%,
        rgba(255, 255, 255, 0.03) 65%,
        rgba(255, 255, 255, 0.03) 70%,
        transparent 70%
      ),
      radial-gradient(
        circle at 100% 150%,
        transparent 65%,
        rgba(255, 255, 255, 0.03) 65%,
        rgba(255, 255, 255, 0.03) 70%,
        transparent 70%
      );
    background-size: 40px 20px;
    background-position: 0 0, 20px 0, -20px 0;
  }
}

/* ============================================================================
   Scrollbar Styling
   ============================================================================ */

::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  background: transparent;
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.1);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.2);
}

.light ::-webkit-scrollbar-thumb {
  background: rgba(0, 0, 0, 0.15);
}

.light ::-webkit-scrollbar-thumb:hover {
  background: rgba(0, 0, 0, 0.25);
}

/* ============================================================================
   Mobile Utilities
   ============================================================================ */

@layer utilities {
  /* Safe area insets for notched devices */
  .safe-top { padding-top: env(safe-area-inset-top); }
  .safe-bottom { padding-bottom: env(safe-area-inset-bottom); }
  .safe-left { padding-left: env(safe-area-inset-left); }
  .safe-right { padding-right: env(safe-area-inset-right); }

  /* Full dynamic viewport height (accounts for mobile browser chrome) */
  .h-dvh { height: 100dvh; }
  .min-h-dvh { min-height: 100dvh; }

  /* Touch-friendly tap target helper */
  .touch-target {
    position: relative;
  }
  .touch-target::after {
    content: "";
    position: absolute;
    inset: -8px;
    /* Ensures minimum 44px touch area */
  }
}

/* ============================================================================
   Reduced Motion
   ============================================================================ */

@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}
